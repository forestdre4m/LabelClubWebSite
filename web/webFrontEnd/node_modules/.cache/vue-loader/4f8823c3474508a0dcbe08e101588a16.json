{"remainingRequest":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\src\\components\\MyLogin.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\src\\components\\MyLogin.vue","mtime":1710381949610},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\webFrontEnd\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwoKICBleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiTXlMb2dpbiIsCiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICBuYW1lOiBbCiAgICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICAgIF0sCiAgICAgICAgICBwYXNzOiBbCiAgICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJ30KICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgICBMb2dpblVzZXI6IHsKICAgICAgICAgIG5hbWU6ICIiLAogICAgICAgICAgcGFzczogIiIsCiAgICAgICAgICByb2xlOiLpn7PkuZDkuroiCiAgICAgICAgfSwKICAgICAgICAvLyDnlKjmiLfkv6Hmga/moKHpqozop4TliJksdmFsaWRhdG9yKOagoemqjOaWueazlSksdHJpZ2dlcijop6blj5HmlrnlvI8pLGJsdXLkuLrlnKjnu4Tku7YgSW5wdXQg5aSx5Y6754Sm54K55pe26Kem5Y+RCiAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgLy8g6I635Y+WdnVleOS4reeahHNob3dMb2dpbu+8jOaOp+WItueZu+W9lee7hOS7tuaYr+WQpuaYvuekugogICAgICBpc0xvZ2luOiB7CiAgICAgICAgZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0U2hvd0xvZ2luOwogICAgICAgIH0sCiAgICAgICAgc2V0KHZhbCkgewogICAgICAgICAgdGhpcy4kcmVmc1sicnVsZUZvcm0iXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgdGhpcy5zZXRTaG93TG9naW4odmFsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIC4uLm1hcEFjdGlvbnMoWyJzZXRVc2VyIiwgInNldFNob3dMb2dpbiJdKSwKICAgICAgTG9naW4oKSB7CiAgICAgICAgbGV0IHVzZXJuYW1lPXRoaXMuTG9naW5Vc2VyLm5hbWU7CiAgICAgICAgLy8g6YCa6L+HZWxlbWVudOiHquWumuS5ieihqOWNleagoemqjOinhOWIme+8jOagoemqjOeUqOaIt+i+k+WFpeeahOeUqOaIt+S/oeaBrwogICAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgICAgLy/lpoLmnpzpgJrov4fmoKHpqozlvIDlp4vnmbvlvZUKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICBpZiAodGhpcy5Mb2dpblVzZXIucm9sZSA9PT0gJ+WOgueJjCcpIHsKICAgICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCIvYXBpL2Zyb250L2xvZ2lubGFiZWwiLCB7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5Mb2dpblVzZXIubmFtZSwKICAgICAgICAgICAgICAgIG1pbWE6IHRoaXMuTG9naW5Vc2VyLnBhc3MKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICIwIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VyID0gSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCB1c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXIocmVzLmRhdGEuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcm5hbWUiLHVzZXJuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY3giLCB0aGlzLkxvZ2luVXNlci5yb2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2NlZWQocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KaWYgKHRoaXMuTG9naW5Vc2VyLnJvbGUgPT09ICfpn7PkuZDkuronKSB7CiAgICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL2FwaS9mcm9udC9sb2dpbmFydGlzdCIsIHsKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLkxvZ2luVXNlci5uYW1lLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuTG9naW5Vc2VyLnBhc3MKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICIwIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNMb2dpbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VyID0gSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVzZXIiLCB1c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXIocmVzLmRhdGEuZGF0YS51c2VyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcm5hbWUiLHVzZXJuYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY3giLCB0aGlzLkxvZ2luVXNlci5yb2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeVN1Y2NlZWQocmVzLmRhdGEubXNnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWyJydWxlRm9ybSJdLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlFcnJvcihyZXMuZGF0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCgkJCQoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH07Cg=="},{"version":3,"sources":["MyLogin.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyLogin.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div id=\"myLogin\">\r\n    <el-dialog title=\"登录\" width=\"300px\" center :visible.sync=\"isLogin\">\r\n      <el-form :model=\"LoginUser\" :rules=\"rules\" status-icon ref=\"ruleForm\" class=\"demo-ruleForm\">\r\n        <el-form-item prop=\"name\">\r\n          <el-input prefix-icon=\"el-icon-user-solid\" placeholder=\"请输入用户名\" v-model=\"LoginUser.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"pass\">\r\n          <el-input\r\n                  prefix-icon=\"el-icon-view\"\r\n                  type=\"password\"\r\n                  placeholder=\"请输入密码\"\r\n                  v-model=\"LoginUser.pass\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"role\">\r\n          \r\n          <el-radio v-model='LoginUser.role' label='音乐人'>登录音乐人账号</el-radio>\r\n\r\n\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button size=\"medium\" type=\"primary\" @click=\"Login\" style=\"width:100%;\">登录</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\n  import { mapActions } from \"vuex\";\r\n\r\n  export default {\r\n    name: \"MyLogin\",\r\n    data() {\r\n      return {\r\n        rules: {\r\n          name: [\r\n            {required: true, message: '请输入用户名', trigger: 'blur'}\r\n          ],\r\n          pass: [\r\n            {required: true, message: '请输入用户名', trigger: 'blur'}\r\n          ],\r\n        },\r\n        LoginUser: {\r\n          name: \"\",\r\n          pass: \"\",\r\n          role:\"音乐人\"\r\n        },\r\n        // 用户信息校验规则,validator(校验方法),trigger(触发方式),blur为在组件 Input 失去焦点时触发\r\n      };\r\n    },\r\n    computed: {\r\n      // 获取vuex中的showLogin，控制登录组件是否显示\r\n      isLogin: {\r\n        get() {\r\n          return this.$store.getters.getShowLogin;\r\n        },\r\n        set(val) {\r\n          this.$refs[\"ruleForm\"].resetFields();\r\n          this.setShowLogin(val);\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions([\"setUser\", \"setShowLogin\"]),\r\n      Login() {\r\n        let username=this.LoginUser.name;\r\n        // 通过element自定义表单校验规则，校验用户输入的用户信息\r\n        this.$refs[\"ruleForm\"].validate(valid => {\r\n          //如果通过校验开始登录\r\n          if (valid) {\r\n            if (this.LoginUser.role === '厂牌') {\r\n              this.$axios.post(\"/api/front/loginlabel\", {\r\n                username: this.LoginUser.name,\r\n                mima: this.LoginUser.pass\r\n              })\r\n                      .then(res => {\r\n                        if (res.data.code === \"0\") {\r\n                          this.isLogin = false;\r\n                          let user = JSON.stringify(res.data.data);\r\n                          localStorage.setItem(\"user\", user);\r\n                          this.setUser(res.data.data.user);\r\n                          localStorage.setItem(\"username\",username);\r\n                          localStorage.setItem(\"cx\", this.LoginUser.role);\r\n                          this.notifySucceed(res.data.msg);\r\n                          this.$router.go(0)\r\n                        } else {\r\n                          this.$refs[\"ruleForm\"].resetFields();\r\n                          this.notifyError(res.data.msg);\r\n                        }\r\n                      })\r\n                      .catch(err => {\r\n                        return Promise.reject(err);\r\n                      });\r\n            }\r\nif (this.LoginUser.role === '音乐人') {\r\n              this.$axios.post(\"/api/front/loginartist\", {\r\n                username: this.LoginUser.name,\r\n                password: this.LoginUser.pass\r\n              })\r\n                      .then(res => {\r\n                        if (res.data.code === \"0\") {\r\n                          this.isLogin = false;\r\n                          let user = JSON.stringify(res.data.data);\r\n                          localStorage.setItem(\"user\", user);\r\n                          this.setUser(res.data.data.user);\r\n                          localStorage.setItem(\"username\",username);\r\n                          localStorage.setItem(\"cx\", this.LoginUser.role);\r\n                          this.notifySucceed(res.data.msg);\r\n                          this.$router.go(0)\r\n                        } else {\r\n                          this.$refs[\"ruleForm\"].resetFields();\r\n                          this.notifyError(res.data.msg);\r\n                        }\r\n                      })\r\n                      .catch(err => {\r\n                        return Promise.reject(err);\r\n                      });\r\n            }\r\n\r\n\t\t\t\r\n\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n</script>\r\n<style>\r\n</style>\r\n"]}]}