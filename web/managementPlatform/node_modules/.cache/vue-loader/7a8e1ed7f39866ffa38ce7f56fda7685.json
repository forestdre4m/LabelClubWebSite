{"remainingRequest":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\src\\views\\yinleren\\personal\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\src\\views\\yinleren\\personal\\index.vue","mtime":1710060274000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619085956000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\babel-loader\\lib\\index.js","mtime":1671005778000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619085956000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\vue-loader\\lib\\index.js","mtime":1671005790000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCglpbXBvcnQge3lpbmxlcmVuRWRpdCwgeWlubGVyZW5TYXZlLHlpbmxlcmVuRGV0YWlsfSBmcm9tICJAL2FwaS95aW5sZXJlbi95aW5sZXJlbkFwaSI7CglpbXBvcnQge1Nlc3Npb259IGZyb20gIkAvdXRpbHMvc3RvcmFnZSI7CgpleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAncGVyc29uYWwnLAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlydWxlczogewoJCQkJdXNlcm5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQldLAoJCQkJcGFzc3dvcmQ6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywgdHJpZ2dlcjogJ2JsdXInIH0sCgkJCQldLAoJCQkJdWlkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXVpZCcsIHRyaWdnZXI6ICdibHVyJyB9LAoJCQkJXSwKCQkJCQoJCQl9LAoJCQllZGl0Rm9ybTogewoJCQkJYXZhdGVyOicnCgkJCX0sCgkJfTsKCX0sCgljcmVhdGVkKCkgewoJCXRoaXMuZ2V0RGV0YWlsKCkKCX0sCgljb21wdXRlZDogewoJCWhlYWRlcnMoKXsKCQkJcmV0dXJuIHsidG9rZW4iOlNlc3Npb24uZ2V0KCJ0b2tlbiIpfQoJCX0sCgl9LAoJbWV0aG9kczp7CgkJZ2V0RGV0YWlsKCl7CgkJCWlmICghU2Vzc2lvbi5nZXQoJ3VzZXJJbmZvJykpIHJldHVybiBmYWxzZTsKCQkJdGhpcy51c2VySW5mbyA9IFNlc3Npb24uZ2V0KCd1c2VySW5mbycpOwoJCQljb25zb2xlLmxvZyh0aGlzLnVzZXJJbmZvKTsKCQkJeWlubGVyZW5EZXRhaWwodGhpcy51c2VySW5mby5pZCkudGhlbihyZXM9PnsKCQkJCWlmIChyZXMuY29kZSA9PSAnMCcpIHsKCQkJCQl0aGlzLmVkaXRGb3JtID0gcmVzLmRhdGE7CgkJCQl9CgkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQlpZihlcnIpewoJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKQoJCQkJfWVsc2UgewoJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpCgkJCQl9CgkJCX0pCgkJfSwKCQkKCQkvLyDnvJbovpHjgIHlop7liqDpobXpnaLkv53lrZjmlrnms5UKCQlzdWJtaXRGb3JtKGVkaXREYXRhKSB7CgkJCXRoaXMuJHJlZnNbZWRpdERhdGFdLnZhbGlkYXRlKHZhbGlkID0+IHsKCQkJCWlmICh2YWxpZCkgewoJCQkJCWlmKHRoaXMuZWRpdEZvcm0uaWQpewoJCQkJCQl5aW5sZXJlbkVkaXQodGhpcy5lZGl0Rm9ybSkudGhlbihyZXMgPT4gewoJCQkJCQkJaWYgKHJlcy5jb2RlID09ICcwJykgewoJCQkJCQkJCXRoaXMuZ2V0RGV0YWlsKCkKCQkJCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLAoJCQkJCQkJCQltZXNzYWdlOiAn5Liq5Lq65L+h5oGv5L+u5pS55oiQ5Yqf77yBJwoJCQkJCQkJCX0pCgkJCQkJCQkJdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJJbmZvcy9zZXRVc2VySW5mb3MnLHRoaXMuZWRpdEZvcm0pOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJCQkJdHlwZTogJ2luZm8nLAoJCQkJCQkJCQltZXNzYWdlOiByZXMubXNnCgkJCQkJCQkJfSkKCQkJCQkJCX0KCQkJCQkJfSkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCWlmKGVycil7CgkJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcihlcnIpCgkJCQkJCQl9ZWxzZSB7CgkJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+V77yBJykKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQl9ZWxzZSB7CgkJCQkJCXlpbmxlcmVuU2F2ZSh0aGlzLmVkaXRGb3JtKS50aGVuKHJlcyA9PiB7CgkJCQkJCQlpZiAocmVzLmNvZGUgPT0gJzAnKSB7CgkJCQkJCQkJdGhpcy5nZXREZXRhaWwoKQoJCQkJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQkJCQl0eXBlOiAnc3VjY2VzcycsCgkJCQkJCQkJCW1lc3NhZ2U6ICfkuKrkurrkv6Hmga/mt7vliqDmiJDlip/vvIEnCgkJCQkJCQkJfSkKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdGhpcy4kbWVzc2FnZSh7CgkJCQkJCQkJCXR5cGU6ICdpbmZvJywKCQkJCQkJCQkJbWVzc2FnZTogcmVzLm1zZwoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQlpZihlcnIpewoJCQkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyKQoJCQkJCQkJfWVsc2UgewoJCQkJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4gZmFsc2UKCQkJCX0KCQkJfSkKCQl9LAoJCWhhbmRsZVRvdXhpYW5nU3VjY2VzcyhyZXMsIGZpbGUpIHsKCQkJCWlmKHJlcy5jb2RlID09ICIwIikgewoJCQkJCXRoaXMuZWRpdEZvcm0uaWNvbiA9ICIvZmlsZXMvZG93bmxvYWQvIityZXMuZGF0YS5pZAoJCQkJfQoJCQl9LAoJCQliZWZvcmVUb3V4aWFuZ1VwbG9hZChmaWxlKSB7CgkJCQljb25zdCBpc0pQRyA9IGZpbGUudHlwZSA9PT0gJ2ltYWdlL2pwZWcnOwoJCQkJY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKCQkJCWlmICghaXNKUEcpIHsKCQkJCQl0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlm77niYflj6rog73mmK8gSlBHIOagvOW8jyEnKTsKCQkJCX0KCQkJCWlmICghaXNMdDJNKSB7CgkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsKCQkJCX0KCQkJCXJldHVybiBpc0pQRyAmJiBpc0x0Mk07CgkJCX0sCgkJCQkKCX0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"index.vue","sourceRoot":"src/views/yinleren/personal","sourcesContent":["<template>\r\n\t<div class=\"personal\">\r\n\t\t<el-form label-width=\"80px\" ref=\"editForm\" :model=\"editForm\" :rules=\"rules\">\r\n\t\t\t<el-form-item  label=\"用户名\" prop=\"yonghuming\"><el-input size=\"small\" v-model=\"editForm.username\" auto-complete=\"off\" placeholder=\"请输入用户名\" style='width:25%'></el-input></el-form-item>\r\n\t\t\r\n\t\t<el-form-item  label=\"uid\" prop=\"uid\"><el-input size=\"small\" v-model=\"editForm.uid\" auto-complete=\"off\" placeholder=\"请输入uid\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"邮箱\" prop=\"email\"><el-input size=\"small\" v-model=\"editForm.email\" auto-complete=\"off\" placeholder=\"请输入邮箱\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"性别\" prop=\"sex\"><el-radio v-model=\"editForm.sex\" :label=true>男</el-radio><el-radio v-model=\"editForm.sex\" :label=false>女</el-radio></el-form-item>\r\n\t\t<el-form-item  label=\"年龄\" prop=\"age\"><el-input type=\"textarea\" size=\"small\" v-model=\"editForm.age\" auto-complete=\"off\" placeholder=\"请输入年龄\" style='width:50%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"签名\" prop=\"text\"><el-input type=\"textarea\" size=\"small\" v-model=\"editForm.text\" auto-complete=\"off\" placeholder=\"请输入签名\" style='width:50%'></el-input></el-form-item>\r\n\t\t<el-form-item  label='头像' prop='icon'><el-upload class='avatar-uploader' action='http://localhost:9999/files/upload' :headers='headers' :show-file-list='false' :on-success='handleTouxiangSuccess' :before-upload='beforeTouxiangUpload'><img v-if='editForm.icon' :src='editForm.icon' class='avatar'><i v-else class='el-icon-plus avatar-uploader-icon'></i></el-upload></el-form-item>\r\n\t\t\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button size=\"small\" type=\"primary\" :loading=\"loading\" class=\"title\" @click=\"submitForm('editForm')\">更新</el-button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {yinlerenEdit, yinlerenSave,yinlerenDetail} from \"@/api/yinleren/yinlerenApi\";\r\n\timport {Session} from \"@/utils/storage\";\r\n\r\nexport default {\r\n\tname: 'personal',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trules: {\r\n\t\t\t\tusername: [{ required: true, message: '请输入用户名', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tpassword: [{ required: true, message: '请输入密码', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tuid: [{ required: true, message: '请输入uid', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\teditForm: {\r\n\t\t\t\tavater:''\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getDetail()\r\n\t},\r\n\tcomputed: {\r\n\t\theaders(){\r\n\t\t\treturn {\"token\":Session.get(\"token\")}\r\n\t\t},\r\n\t},\r\n\tmethods:{\r\n\t\tgetDetail(){\r\n\t\t\tif (!Session.get('userInfo')) return false;\r\n\t\t\tthis.userInfo = Session.get('userInfo');\r\n\t\t\tconsole.log(this.userInfo);\r\n\t\t\tyinlerenDetail(this.userInfo.id).then(res=>{\r\n\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\tthis.editForm = res.data;\r\n\t\t\t\t}\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 编辑、增加页面保存方法\r\n\t\tsubmitForm(editData) {\r\n\t\t\tthis.$refs[editData].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif(this.editForm.id){\r\n\t\t\t\t\t\tyinlerenEdit(this.editForm).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '个人信息修改成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('userInfos/setUserInfos',this.editForm);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tyinlerenSave(this.editForm).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '个人信息添加成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleTouxiangSuccess(res, file) {\r\n\t\t\t\tif(res.code == \"0\") {\r\n\t\t\t\t\tthis.editForm.icon = \"/files/download/\"+res.data.id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeTouxiangUpload(file) {\r\n\t\t\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n\t\t\t\tif (!isJPG) {\r\n\t\t\t\t\tthis.$message.error('上传图片只能是 JPG 格式!');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('上传图片大小不能超过 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJPG && isLt2M;\r\n\t\t\t},\r\n\t\t\t\t\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import './index.scss';\r\n</style>\r\n"]}]}