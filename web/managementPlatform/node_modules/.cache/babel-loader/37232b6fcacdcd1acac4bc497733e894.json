{"remainingRequest":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\src\\views\\changpai\\personal\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\src\\views\\changpai\\personal\\index.vue","mtime":1710044424000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\babel.config.js","mtime":1708837928000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619085956000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\babel-loader\\lib\\index.js","mtime":1671005778000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1619085956000},{"path":"C:\\Users\\FORRE\\Desktop\\LabelClubWebsite\\web\\managementPlatform\\node_modules\\vue-loader\\lib\\index.js","mtime":1671005790000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoYW5ncGFpRWRpdCwgY2hhbmdwYWlTYXZlLCBjaGFuZ3BhaURldGFpbCB9IGZyb20gIkAvYXBpL2NoYW5ncGFpL2NoYW5ncGFpQXBpIjsKaW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gIkAvdXRpbHMvc3RvcmFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncGVyc29uYWwnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlczogewogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl55So5oi35ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5a+G56CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGxpZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpWxpZCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBlZGl0Rm9ybTogewogICAgICAgIGF2YXRlcjogJycKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERldGFpbCgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgInRva2VuIjogU2Vzc2lvbi5nZXQoInRva2VuIikKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldERldGFpbCgpIHsKICAgICAgaWYgKCFTZXNzaW9uLmdldCgndXNlckluZm8nKSkgcmV0dXJuIGZhbHNlOwogICAgICB0aGlzLnVzZXJJbmZvID0gU2Vzc2lvbi5nZXQoJ3VzZXJJbmZvJyk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlckluZm8pOwogICAgICBjaGFuZ3BhaURldGFpbCh0aGlzLnVzZXJJbmZvLmlkKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09ICcwJykgewogICAgICAgICAgdGhpcy5lZGl0Rm9ybSA9IHJlcy5kYXRhOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g57yW6L6R44CB5aKe5Yqg6aG16Z2i5L+d5a2Y5pa55rOVCiAgICBzdWJtaXRGb3JtKGVkaXREYXRhKSB7CiAgICAgIHRoaXMuJHJlZnNbZWRpdERhdGFdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGlmICh0aGlzLmVkaXRGb3JtLmlkKSB7CiAgICAgICAgICAgIGNoYW5ncGFpRWRpdCh0aGlzLmVkaXRGb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09ICcwJykgewogICAgICAgICAgICAgICAgdGhpcy5nZXREZXRhaWwoKTsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkuKrkurrkv6Hmga/kv67mlLnmiJDlip/vvIEnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VySW5mb3Mvc2V0VXNlckluZm9zJywgdGhpcy5lZGl0Rm9ybSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjaGFuZ3BhaVNhdmUodGhpcy5lZGl0Rm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PSAnMCcpIHsKICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGV0YWlsKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Liq5Lq65L+h5oGv5re75Yqg5oiQ5Yqf77yBJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVycik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivle+8gScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNoYW5ncGFpdHVwaWFuU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgaWYgKHJlcy5jb2RlID09ICIwIikgewogICAgICAgIHRoaXMuZWRpdEZvcm0ubGFiZWxwaWMgPSAiL2ZpbGVzL2Rvd25sb2FkLyIgKyByZXMuZGF0YS5pZDsKICAgICAgfQogICAgfSwKICAgIGJlZm9yZUNoYW5ncGFpdHVwaWFuVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc3QgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICdpbWFnZS9qcGVnJzsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwogICAgICBpZiAoIWlzSlBHKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hJyk7CiAgICAgIH0KICAgICAgaWYgKCFpc0x0Mk0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlm77niYflpKflsI/kuI3og73otoXov4cgMk1CIScpOwogICAgICB9CiAgICAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk07CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AAEA;EACAA;EACAC;IACA;MACAC;QACAC;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC;UAAAH;UAAAC;UAAAC;QAAA,EACA;QACAE;UAAAJ;UAAAC;UAAAC;QAAA;MAGA;MACAG;QACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;QAAA;MAAA;IACA;EACA;EACAC;IACAC;MACA;MACA;MACAC;MACAC;QACA;UACA;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IAEA;IACAC;MACA;QACA;UACA;YACAC;cACA;gBACA;gBACA;kBACAC;kBACAf;gBACA;gBACA;cACA;gBACA;kBACAe;kBACAf;gBACA;cACA;YACA;cACA;gBACA;cACA;gBACA;cACA;YACA;UACA;YACAgB;cACA;gBACA;gBACA;kBACAD;kBACAf;gBACA;cACA;gBACA;kBACAe;kBACAf;gBACA;cACA;YACA;cACA;gBACA;cACA;gBACA;cACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAiB;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MAEA;QACA;MACA;MACA;QACA;MACA;MACA;IACA;EAEA;AACA","names":["name","data","rules","username","required","message","trigger","password","lid","editForm","avater","created","computed","headers","methods","getDetail","console","changpaiDetail","submitForm","changpaiEdit","type","changpaiSave","handleChangpaitupianSuccess","beforeChangpaitupianUpload"],"sourceRoot":"src/views/changpai/personal","sources":["index.vue"],"sourcesContent":["<template>\r\n\t<div class=\"personal\">\r\n\t\t<el-form label-width=\"80px\" ref=\"editForm\" :model=\"editForm\" :rules=\"rules\">\r\n\t\t\t<el-form-item  label=\"用户名\" prop=\"username\"><el-input size=\"small\" v-model=\"editForm.username\" auto-complete=\"off\" placeholder=\"请输入用户名\" style='width:25%'></el-input></el-form-item>\r\n\t\t\r\n\t\t<el-form-item  label=\"lid\" prop=\"lid\"><el-input size=\"small\" v-model=\"editForm.lid\" auto-complete=\"off\" placeholder=\"请输入lid\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"厂牌名称\" prop=\"labelname\"><el-input size=\"small\" v-model=\"editForm.labelname\" auto-complete=\"off\" placeholder=\"请输入厂牌名称\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"邮箱\" prop=\"email\"><el-input size=\"small\" v-model=\"editForm.email\" auto-complete=\"off\" placeholder=\"请输入邮箱\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"地点\" prop=\"place\"><el-input size=\"small\" v-model=\"editForm.place\" auto-complete=\"off\" placeholder=\"请输入地点\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label=\"成立日期\" prop=\"doe\"><el-date-picker type=\"date\" value-format=\"yyyy-MM-dd\" size=\"small\" v-model=\"editForm.doe\" style='width:25%'/></el-form-item>\r\n\t\t<el-form-item  label=\"流派标签\" prop=\"genre\"><el-input size=\"small\" v-model=\"editForm.genre\" auto-complete=\"off\" placeholder=\"请输入流派标签\" style='width:25%'></el-input></el-form-item>\r\n\t\t<el-form-item  label='厂牌图片' prop='labelpic'><el-upload class='avatar-uploader' action='http://localhost:9999/files/upload' :headers='headers' :show-file-list='false' :on-success='handleChangpaitupianSuccess' :before-upload='beforeChangpaitupianUpload'><img v-if='editForm.labelpic' :src='editForm.labelpic' class='avatar'><i v-else class='el-icon-plus avatar-uploader-icon'></i></el-upload></el-form-item>\r\n\t\t\r\n\t\t</el-form>\r\n\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t<el-button size=\"small\" type=\"primary\" :loading=\"loading\" class=\"title\" @click=\"submitForm('editForm')\">更新</el-button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {changpaiEdit, changpaiSave,changpaiDetail} from \"@/api/changpai/changpaiApi\";\r\n\timport {Session} from \"@/utils/storage\";\r\n\r\nexport default {\r\n\tname: 'personal',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trules: {\r\n\t\t\t\tusername: [{ required: true, message: '请输入用户名', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tpassword: [{ required: true, message: '请输入密码', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\tlid: [{ required: true, message: '请输入lid', trigger: 'blur' },\r\n\t\t\t\t],\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\teditForm: {\r\n\t\t\t\tavater:''\r\n\t\t\t},\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.getDetail()\r\n\t},\r\n\tcomputed: {\r\n\t\theaders(){\r\n\t\t\treturn {\"token\":Session.get(\"token\")}\r\n\t\t},\r\n\t},\r\n\tmethods:{\r\n\t\tgetDetail(){\r\n\t\t\tif (!Session.get('userInfo')) return false;\r\n\t\t\tthis.userInfo = Session.get('userInfo');\r\n\t\t\tconsole.log(this.userInfo);\r\n\t\t\tchangpaiDetail(this.userInfo.id).then(res=>{\r\n\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\tthis.editForm = res.data;\r\n\t\t\t\t}\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tif(err){\r\n\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t}else {\r\n\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// 编辑、增加页面保存方法\r\n\t\tsubmitForm(editData) {\r\n\t\t\tthis.$refs[editData].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tif(this.editForm.id){\r\n\t\t\t\t\t\tchangpaiEdit(this.editForm).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '个人信息修改成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('userInfos/setUserInfos',this.editForm);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tchangpaiSave(this.editForm).then(res => {\r\n\t\t\t\t\t\t\tif (res.code == '0') {\r\n\t\t\t\t\t\t\t\tthis.getDetail()\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '个人信息添加成功！'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\t\t\t\tmessage: res.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tif(err){\r\n\t\t\t\t\t\t\t\tthis.$message.error(err)\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tthis.$message.error('操作失败，请稍后再试！')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleChangpaitupianSuccess(res, file) {\r\n\t\t\t\tif(res.code == \"0\") {\r\n\t\t\t\t\tthis.editForm.labelpic = \"/files/download/\"+res.data.id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbeforeChangpaitupianUpload(file) {\r\n\t\t\t\tconst isJPG = file.type === 'image/jpeg';\r\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n\t\t\t\tif (!isJPG) {\r\n\t\t\t\t\tthis.$message.error('上传图片只能是 JPG 格式!');\r\n\t\t\t\t}\r\n\t\t\t\tif (!isLt2M) {\r\n\t\t\t\t\tthis.$message.error('上传图片大小不能超过 2MB!');\r\n\t\t\t\t}\r\n\t\t\t\treturn isJPG && isLt2M;\r\n\t\t\t},\r\n\t\t\t\t\r\n\t}\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@import './index.scss';\r\n</style>\r\n"]}]}